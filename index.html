<!DOCTYPE html>
<html>

<head>


    <body onload="initialize()">
        <script>
            function initialize() {
                retrieveContacts();
            }

            function retrieveContacts() {
                const xhr = new XMLHttpRequest();
                const url = "contacts.json";

                xhr.onreadystatechange = function() {
                    if (xhr.readyState === 4) {
                        var contacts = JSON.parse(xhr.response).contacts;
                        displayContacts(contacts);

                        // Store contact data to localstorage
                        const localStorage = window.localStorage;
                        if (localStorage) {
                            localStorage.setItem("contacts", JSON.stringify(contacts));
                        }
                    }
                };

                xhr.open("get", url);
                xhr.send();
            }

            function displayContacts(contacts) {
                contacts.forEach(addRow);
            }

            function addRow(contact) {
                var tcontent = document.getElementById("tcontent");
                var row = tcontent.insertRow();

                var nameCell = row.insertCell();
                //nameCell.setAttribute('data-label', "Name");
                nameCell.innerHTML = contact.name;

                var addressCell = row.insertCell();
                //addressCell.setAttribute('data-label', "Address");
                addressCell.innerHTML = contact.address;

                var mobileCell = row.insertCell();
                //mobileCell.setAttribute('data-label', "Mobile");
                mobileCell.innerHTML = contact.phone.mobile;
            }
        </script>

        <table>
            <caption>Information
                <div id="status"></div>
            </caption>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Address</th>
                    <th>Mobile</th>
                </tr>
            </thead>
            <tbody id="tcontent">
            </tbody>

        </table>

    </body>

</html>
